---
title: XDef
description: 有关 XDef 的使用说明
authors:
  - flytreleft
---

import {Table, TRow, TCol, TDesc} from '@site/src/components/Table';
import Header from '@site/docs/\_header.md';

<Header />

在 Nop 中，所有的 DSL 均由其 XDef 元模型定义其结构，以用于校验和解析 DSL 的结构。
例如，定义如下结构的工作流 DSL：

```xml
<workflow
  xmlns:x="/nop/schema/xdsl.xdef" x:schema="/nop/schema/xdef.xdef"
  name="!string"
>
  <xdef:define xdef:name="WorkflowStepModel"
    id="!string" displayName="string"
    joinType="enum:io.nop.wf.core.model.WfJoinType" next="string"
  >
    <source xdef:value="xpl" />
  </xdef:define>

  <steps xdef:body-type="list" xdef:key-attr="id">
    <step xdef:ref="WorkflowStepModel" id="!string" />
  </steps>
</workflow>
```

## 结构 {#attrs}

<Table head={['属性', '值类型', '属性名称', '必填']}>

<!-- -->

<TRow><TCol id="attr_xdef_name"> xdef:name </TCol><TCol>

[var-name](../dict/std-domain#opt_var_name)

</TCol><TCol> </TCol>
<TCol> 否 </TCol><TDesc>

将本节点注册为 xdef 片段，其他节点可以通过 `xdef:ref` 来引用该片段。
一般对应于 Java 类名，会根据它和根节点上的 `xdef:bean-package` 设置
自动生成 `xdef:bean-class` 属性。

</TDesc></TRow>

<!-- -->

<TRow><TCol id="attr_xdef_body_type"> xdef:body-type </TCol><TCol>

`io.nop.xlang.xdef.XDefBodyType`

</TCol><TCol> 节点 body 类型 </TCol>
<TCol> 否 </TCol><TDesc>

可选值如下：

- `union`: 最多只允许一个子节点
- `list`: 将当前节点解析为 `List`。若在当前节点上指定了 `xdef:key-attr`，
  则该节点解析后对应 `KeyedList` 类型，可通过 `xdef:key-attr`
  指定的子节点属性的值作为 `key`
- `map`: 将当前节点解析为 `Map`，且以子节点的标签名作为 `key`

</TDesc></TRow>

<!-- -->

<TRow><TCol id="attr_xdef_key_attr"> xdef:key-attr </TCol><TCol>

[xml-name](../dict/std-domain#opt_xml_name)

</TCol><TCol> 列表索引属性名 </TCol>
<TCol> 否 </TCol><TDesc>


</TDesc></TRow>

</Table>
